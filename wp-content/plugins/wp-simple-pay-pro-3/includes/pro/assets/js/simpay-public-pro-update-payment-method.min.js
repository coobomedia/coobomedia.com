!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=66)}({0:function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},1:function(e,t,r){e.exports=r(18)},10:function(e,t,r){"use strict";function n(e){if(!window.simpayGoogleRecaptcha)return Promise.resolve("");var t=window.simpayGoogleRecaptcha,r=t.siteKey,n=t.i18n;return new Promise((function(t,o){try{grecaptcha.execute(r,{action:e}).then((function(e){return t(e)}))}catch(e){o(n.invalid)}}))}r.d(t,"a",(function(){return n}))},11:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return p}));var n=r(0),o=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c={base:{color:"#32325d",fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontSize:"15px",fontSmoothing:"antialiased",fontWeight:"normal","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}};function u(e,t){if(document.getElementById("simpay-stripe-element-styles"))return c;var r,n=document.createElement("style");if(n.id="simpay-stripe-element-styles",(r=document.querySelector("input.simpay-email"))||(r=document.querySelector('body [role="main"] input:not([type="hidden"])')),!r)return n.innerHTML=".StripeElement.simpay-field-wrap {\n\t\t\tbackground: #fff;\n\t\t\tborder: 1px solid #d1d1d1;\n\t\t\tborder-radius: 4px;\n\t\t\tpadding: 0.4375em;\n\t\t\theight: 36px;\n\t\t\tmin-height: 36px;\n\t\t}",document.body.appendChild(n),c;var o=window.getComputedStyle(r),a=(window.getComputedStyle(r,"::placeholder"),["top","right","bottom","left"].map((function(e){return"border-".concat(e,"-color: ").concat(o.getPropertyValue("border-".concat(e,"-color")),";\n\t\t\tborder-").concat(e,"-width: ").concat(o.getPropertyValue("border-".concat(e,"-width")),";\n\t\t\tborder-").concat(e,"-style: ").concat(o.getPropertyValue("border-".concat(e,"-style")),";\n\t\t\tpadding-").concat(e,": ").concat(o.getPropertyValue("padding-".concat(e)),";")}))),i=["top-right","bottom-right","bottom-left","top-left"].map((function(e){return"border-".concat(e,"-radius: ").concat(o.getPropertyValue("border-".concat(e,"-radius")),";")}));return n.innerHTML=".StripeElement.simpay-field-wrap {\n\t\t\tbackground-color: ".concat(o.getPropertyValue("background-color"),";\n\t\t\t").concat(a.join(""),"\n\t\t\t").concat(i.join(""),"\n\t\t}"),document.body.appendChild(n),{base:{color:o.getPropertyValue("color"),fontFamily:o.getPropertyValue("font-family"),fontSize:o.getPropertyValue("font-size"),fontWeight:o.getPropertyValue("font-weight"),fontSmoothing:o.getPropertyValue("-webkit-font-smoothing"),"::placeholder":{color:"#c7c7c7"}}}}function s(e){var t={line1:"street",city:"city",state:"state",postal_code:"zip",country:"country"};return Object.keys(t).reduce((function(r,n){var a;return i(i({},r),{},o()({},n,(null===(a=e.querySelector(".simpay-address-".concat(t[n])))||void 0===a?void 0:a.value)||null))}),{})}function p(e){var t,r,n,o=e[0],a=(null===(t=o.querySelector(".simpay-customer-name"))||void 0===t?void 0:t.value)||null,i=(null===(r=o.querySelector(".simpay-email"))||void 0===r?void 0:r.value)||null,c=(null===(n=o.querySelector(".simpay-telephone"))||void 0===n?void 0:n.value)||null,u=null,p=null,l=o.querySelector(".simpay-billing-address-container");l&&(u=s(l));var f=o.querySelector(".simpay-same-address-toggle");if(f&&!0===f.checked)p=u;else{var d=o.querySelector(".simpay-shipping-address-container");d&&(p=s(d))}return{name:a,email:i,phone:c,address:u,shippingAddress:p}}},18:function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof l?t:l,a=Object.create(o.prototype),i=new _(n||[]);return a._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=O(i,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,i),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function l(){}function f(){}function d(){}var y={};c(y,o,(function(){return this}));var h=Object.getPrototypeOf,m=h&&h(h(P([])));m&&m!==t&&r.call(m,o)&&(y=m);var b=d.prototype=l.prototype=Object.create(y);function v(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,c){var u=s(e[o],e,a);if("throw"!==u.type){var p=u.arg,l=p.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(l).then((function(e){p.value=e,i(p)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function O(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function P(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=d,c(b,"constructor",d),c(d,"constructor",f),f.displayName=c(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},v(g.prototype),c(g.prototype,a,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},v(b),c(b,i,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=P,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;j(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}(e.exports);try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},19:function(e,t,r){"use strict";t.a=function(e){var t=e.__unstableLegacyFormData.checkoutButtonLoadingText;e.addClass("simpay-checkout-form--loading"),e.find(".simpay-checkout-btn").prop("disabled",!0).addClass("simpay-disabled").find("span").html(t),e.find("input, select, textarea").prop("readonly",!0)}},2:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return c}));var n=r(3),o=r.n(n),a=r(1),i=r.n(a);function c(_x,e){return u.apply(this,arguments)}function u(){return(u=o()(i.a.mark((function t(r,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ajax({data:n,method:"POST",url:"".concat(wpApiSettings.root,"wpsp/").concat(r),beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)}});case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),t.t0.responseJSON;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))).apply(this,arguments)}}).call(this,r(6))},20:function(e,t,r){"use strict";t.a=function(e,t){var r,n=e.enable,o=e.__unstableLegacyFormData,a=o.stripeErrorMessages,i=o.unknownError;if(t&&""===t)r="";else if(void 0!==t){var c=t.message,u=t.code;r=c||t,u&&a[u]&&(r=a[u])}else r=i;e.find(".simpay-errors").html(r),n()}},3:function(e,t){function r(e,t,r,n,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function c(e){r(i,o,a,c,u,"next",e)}function u(e){r(i,o,a,c,u,"throw",e)}c(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},4:function(e,t){var r=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,o=/(\[[^\[\]]*\])/g;function a(e,t,r){if(t.match(o))!function e(t,r,n){if(0===r.length)return n;var o=r.shift(),a=o.match(/^\[(.+?)\]$/);if("[]"===o)return t=t||[],Array.isArray(t)?t.push(e(null,r,n)):(t._values=t._values||[],t._values.push(e(null,r,n))),t;if(a){var i=a[1],c=+i;isNaN(c)?(t=t||{})[i]=e(t[i],r,n):(t=t||[])[c]=e(t[c],r,n)}else t[o]=e(t[o],r,n);return t}(e,function(e){var t=[],r=new RegExp(o),n=/^([^\[\]]*)/.exec(e);for(n[1]&&t.push(n[1]);null!==(n=r.exec(e));)t.push(n[1]);return t}(t),r);else{var n=e[t];n?(Array.isArray(n)||(e[t]=[n]),e[t].push(r)):e[t]=r}return e}function i(e,t,r){return r=r.replace(/(\r)?\n/g,"\r\n"),r=(r=encodeURIComponent(r)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+r}e.exports=function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var o=t.hash?{}:"",c=t.serializer||(t.hash?a:i),u=e&&e.elements?e.elements:[],s=Object.create(null),p=0;p<u.length;++p){var l=u[p];if((t.disabled||!l.disabled)&&l.name&&n.test(l.nodeName)&&!r.test(l.type)){var f=l.name,d=l.value;if("checkbox"!==l.type&&"radio"!==l.type||l.checked||(d=void 0),t.empty){if("checkbox"!==l.type||l.checked||(d=""),"radio"===l.type&&(s[l.name]||l.checked?l.checked&&(s[l.name]=!0):s[l.name]=!1),null==d&&"radio"==l.type)continue}else if(!d)continue;if("select-multiple"!==l.type)o=c(o,f,d);else{d=[];for(var y=l.options,h=!1,m=0;m<y.length;++m){var b=y[m],v=t.empty&&!b.value,g=b.value||v;b.selected&&g&&(h=!0,o=t.hash&&"[]"!==f.slice(f.length-2)?c(o,f+"[]",b.value):c(o,f,b.value))}!h&&t.empty&&(o=c(o,f,""))}}}if(t.empty)for(var f in s)s[f]||(o=c(o,f,""));return o}},5:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return i})),r.d(t,"e",(function(){return c}));var n={};r.r(n),r.d(n,"create",(function(){return h}));var o={};r.r(o),r.d(o,"create",(function(){return v}));var a={};r.r(a),r.d(a,"preview",(function(){return S})),r.d(a,"submit",(function(){return E}));var i={};r.r(i),r.d(i,"create",(function(){return I}));var c={};r.r(c),r.d(c,"create",(function(){return T})),r.d(c,"updatePaymentMethod",(function(){return N}));var u=r(2),s=r(0),p=r.n(s),l=r(4),f=r.n(l);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.id,n=t.getFormData;return Object(u.a)("v2/customer",y({form_values:f()(t[0],{hash:!0}),form_data:n(),form_id:r},e))}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.id,n=t.getFormData;return Object(u.a)("v2/paymentintent/create",b({form_values:f()(t[0],{hash:!0}),form_data:n(),form_id:r},e))}var g=r(3),O=r.n(g),w=r(1),j=r.n(w),_=r(10);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(_x){return k.apply(this,arguments)}function k(){return(k=O()(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)("simple_pay_form_".concat(t.form_id,"_order_preview"));case 2:return r=e.sent,e.abrupt("return",Object(u.a)("v2/order/preview",x(x({},t),{},{captcha:{recaptcha:r}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return D.apply(this,arguments)}function D(){return(D=O()(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)("simple_pay_form_".concat(t.form_id,"_order_submit"));case 2:return r=e.sent,e.abrupt("return",Object(u.a)("v2/order/submit",x(x({},t),{},{captcha:{recaptcha:r}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.id,n=t.getFormData;return Object(u.a)("v2/setupintent/create",M({form_values:f()(t[0],{hash:!0}),form_data:n(),form_id:r},e))}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){p()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.id,n=t.getFormData;return Object(u.a)("v2/subscription",F({form_values:f()(t[0],{hash:!0}),form_data:n(),form_id:r},e))}function N(e,t,r,n,o){return Object(u.a)("v2/subscription/payment_method/".concat(r,"/").concat(e),{customer_nonce:t,form_values:o,form_id:n})}},6:function(e,t){e.exports=jQuery},66:function(e,t,r){"use strict";r.r(t),function(e){var t=r(0),n=r.n(t),o=r(3),a=r.n(o),i=r(1),c=r.n(i),u=r(8),s=r(5),p=r(20),l=r(19),f=r(11);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=window.wpsp.paymentForms.getPaymentMethod,m={card:function(e){var t=e.stripeInstance,r=e.stripeInstance.elements;return t.createPaymentMethod({type:"card",card:r.card,billing_details:Object(f.b)(e)}).then((function(e){if(e.error)throw e.error;return e.paymentMethod}))},"ach-debit":function(e){return a()(c.a.mark((function t(){var r,n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=r.paymentMethodId,t.abrupt("return",{id:n});case 3:case"end":return t.stop()}}),t)})))()},"sepa-debit":function(e){return a()(c.a.mark((function t(){var r,n,o,a,i,u,p,l,d,y,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state,n=e.stripeInstance,o=e.stripeInstance.elements,a=simpayUpdatePaymentMethod,i=a.customer_setupintent_nonce,u=r.customerId,t.next=5,s.d.create({customer_id:u,customer_nonce:i,payment_method_types:["sepa_debit"]},e);case 5:return p=t.sent,l=p.client_secret,t.next=9,n.confirmSepaDebitSetup(l,{payment_method:{sepa_debit:o.sepaDebit,billing_details:Object(f.b)(e)}});case 9:if(d=t.sent,y=d.error,h=d.setupIntent,!y){t.next=14;break}throw y;case 14:return t.abrupt("return",{id:h.payment_method});case 15:case"end":return t.stop()}}),t)})))()}};Object(u.a)((function(){var t=document.getElementById("simpay-form-update-payment-method");if(t){var r=simpayUpdatePaymentMethod,n=r.id,o=r.customer_id,i=r.customer_nonce,u=r.subscription_id,d=r.subscription_key,b=r.nonce,v=r.i18n,g=window.simplePayForms[n],O=g.form,w=O.config,j=O.bools,P=O.strings,x=O.i18n,S=g.stripe,k=w.paymentMethods,E={formDisplayType:"embedded",checkoutButtonLoadingText:v.loading,checkoutButtonText:v.submit,stripeParams:{key:S.strings.key},formId:n,isTestMode:j.isTestMode,companyName:P.companyName,stripeErrorMessages:x.stripeErrorMessages},D=e.extend(e(t),{id:n,__unstableLegacyFormData:E,state:{paymentMethods:k,paymentMethod:_.first(k),customerId:o},stripeInstance:Stripe(S.strings.key),getElementStyle:f.a,getOwnerData:f.b});D.setState=function(e){D.state=y(y({},D.state),e)},D.enable=function(){D.removeClass("simpay-checkout-form--loading").find(".simpay-checkout-btn").prop("disabled",!1).removeClass("simpay-disabled").text(v.submit)},D.disable=_.bind(l.a,D,D),D.error=_.bind(p.a,D,D),k.forEach((function(e){var t=e.id;h(t).setup(D,!0),"ach-debit"===t&&function(e){var t=e[0].querySelector(".simpay-ach-debit-wrap");if(t){var r=t.querySelector("button");if(r){var n=e.error,o=e.disable,i=e.enable,u=e.state,p=e.setState,l=e.stripeInstance,d=u.customerId,y=simpayUpdatePaymentMethod.customer_setupintent_nonce;r.addEventListener("click",function(){var t=a()(c.a.mark((function t(r){var a,u,h,m,b,v,g,O;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),o(),t.next=4,s.d.create({customer_id:d,customer_nonce:y,payment_method_types:["us_bank_account"]},e).catch((function(e){return n(e)}));case 4:return a=t.sent,u=a.client_secret,h=Object(f.b)(e),m=h.name,b=h.email,t.next=9,l.collectBankAccountForSetup({clientSecret:u,params:{payment_method_type:"us_bank_account",payment_method_data:{billing_details:{name:m,email:b}}}});case 9:if(v=t.sent,g=v.setupIntent,!(O=v.error)){t.next=14;break}throw O;case 14:if("requires_payment_method"!==g.status){t.next=16;break}return t.abrupt("return",i());case 16:"requires_confirmation"===g.status&&(p({paymentMethodId:g.payment_method}),i(),e[0].querySelector(".simpay-ach-debit-wrap button").style.display="none",e[0].querySelector("#simpay-ach-debit-terms").style.display="block",e[0].querySelector("#simpay-ach-debit-terms-recurring").style.display="block",e[0].querySelector(".simpay-checkout-btn-container").style.display="block");case 17:case"end":return t.stop()}}),t)})));return function(_x){return t.apply(this,arguments)}}())}}}(D);var r=D[0].querySelector('.simpay-payment-method-toggle[data-payment-method="'.concat(t,'"]'));r&&r.addEventListener("click",(function(){D.setState({paymentMethod:_.findWhere(k,{id:t})})}))})),t.addEventListener("submit",function(){var e=a()(c.a.mark((function e(t){var r,a,p,l,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=D.error,a=D.disable,p=D.state,l=p.paymentMethod,a(),e.next=6,m[l.id](D).catch(r);case 6:if(f=e.sent){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,e.next=12,s.e.updatePaymentMethod(o,i,u,n,{payment_method_id:f.id,_wpnonce:b,subscription_key:d}).catch((function(e){throw e}));case 12:window.location.replace(window.location.href),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),r(e.t0);case 18:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t){return e.apply(this,arguments)}}())}}))}.call(this,r(6))},8:function(e,t,r){"use strict";function n(e){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}r.d(t,"a",(function(){return n}))}});